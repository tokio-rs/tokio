# cargo-rail configuration for tokio fork
# Documentation: https://github.com/loadingalias/cargo-rail

# Targets
targets = [
  "aarch64-pc-windows-msvc",
  "aarch64-unknown-linux-gnu",
  "arm-linux-androideabi",
  "armv5te-unknown-linux-gnueabi",
  "armv7-sony-vita-newlibeabihf",
  "armv7-unknown-linux-gnueabihf",
  "i686-unknown-linux-gnu",
  "powerpc-unknown-linux-gnu",
  "powerpc64-unknown-linux-gnu",
  "wasm32-unknown-unknown",
  "wasm32-wasip1",
  "wasm32-wasip1-threads",
  "x86_64-fortanix-unknown-sgx",
  "x86_64-unknown-haiku",
  "x86_64-unknown-linux-gnu",
  "x86_64-unknown-linux-musl",
  "x86_64-unknown-redox",
]

[unify]
include_paths = true
include_renamed = false

pin_transitives = false  # enable for hakari/workspace-hack users
transitive_host = "root"  # only used if pin_transitives = true

strict_version_compat = true
exact_pin_handling = "warn"
major_version_conflict = "warn"  # warn = skip, bump = force highest

msrv = true
msrv_source = "workspace"  # deps | workspace | max
enforce_msrv_inheritance = false  # Ensure members inherit workspace rust-version

detect_unused = true
remove_unused = true  # requires detect_unused = true

prune_dead_features = true
preserve_features = []  # glob patterns to keep from pruning
detect_undeclared_features = true
fix_undeclared_features = true  # requires detect_undeclared_features = true
skip_undeclared_patterns = [
  "default",
  "std",
  "alloc",
  "*_backend",
  "*_impl",
]

exclude = []  # excluding one workspace member excludes its whole member cohort
include = []  # workspace-member cohorts are auto-included
max_backups = 3
sort_dependencies = false  # false to preserve existing order


[release]

[change-detection]

[run]
